{% extends "base.html" %}

{% block title %}{{ article.title }} - {{ SITENAME }}{% endblock %}

{% block meta_description %}{{ article.summary|striptags if article.summary else article.content[:150]|striptags }}{% endblock %}

{% block content %}
<div class="article-container">
    <article class="article-full">
        <!-- Dynamic Banner based on Category -->
        {% if article.category == 'E-commerce' %}
        <div class="article-banner article-banner-ecommerce">
            <svg class="banner-svg" viewBox="0 0 1200 300" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="ecommerceBg" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#FF6B6B;stop-opacity:1" />
                        <stop offset="50%" style="stop-color:#FF8E72;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#FFA05B;stop-opacity:1" />
                    </linearGradient>
                    <filter id="ecommerceShadow">
                        <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
                    </filter>
                </defs>
                <rect width="1200" height="300" fill="url(#ecommerceBg)"/>
                
                <!-- Decorative circles -->
                <circle cx="150" cy="50" r="80" fill="rgba(255,255,255,0.1)"/>
                <circle cx="1050" cy="250" r="100" fill="rgba(255,255,255,0.08)"/>
                
                <!-- Shopping Cart Icon -->
                <g transform="translate(150, 120)" filter="url(#ecommerceShadow)">
                    <path d="M 10 10 L 15 40 Q 15 50 25 50 L 65 50 Q 75 50 75 40 L 78 15" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="30" cy="70" r="8" fill="white" opacity="0.8"/>
                    <circle cx="70" cy="70" r="8" fill="white" opacity="0.8"/>
                    <path d="M 20 35 L 70 35" stroke="white" stroke-width="2" opacity="0.5"/>
                </g>
                
                <!-- Money/Trending Icon -->
                <g transform="translate(950, 100)" filter="url(#ecommerceShadow)">
                    <rect x="10" y="10" width="60" height="60" fill="none" stroke="white" stroke-width="2" rx="3"/>
                    <polyline points="15,45 30,25 45,35 65,15" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="65" cy="15" r="4" fill="white"/>
                </g>
                
                <!-- Text -->
                <text x="600" y="110" font-size="56" font-weight="700" fill="white" text-anchor="middle" font-family="'Segoe UI', Arial, sans-serif" letter-spacing="0.5">Tend√™ncias E-commerce</text>
                <text x="600" y="170" font-size="22" fill="rgba(255,255,255,0.95)" text-anchor="middle" font-family="'Segoe UI', Arial, sans-serif">An√°lise de dados e estrat√©gias de mercado</text>
                
                <!-- Accent line -->
                <line x1="350" y1="190" x2="850" y2="190" stroke="white" stroke-width="2" opacity="0.4"/>
            </svg>
        </div>
        {% elif article.category == 'Python' %}
        <div class="article-banner article-banner-python">
            <svg class="banner-svg" viewBox="0 0 1200 300" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="pythonBg" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#4B8BBE;stop-opacity:1" />
                        <stop offset="50%" style="stop-color:#306998;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#1E3A8A;stop-opacity:1" />
                    </linearGradient>
                    <filter id="pythonShadow">
                        <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.25"/>
                    </filter>
                </defs>
                <rect width="1200" height="300" fill="url(#pythonBg)"/>
                
                <!-- Decorative elements -->
                <circle cx="100" cy="80" r="70" fill="rgba(255,255,255,0.08)"/>
                <circle cx="1100" cy="220" r="90" fill="rgba(255,255,255,0.06)"/>
                
                <!-- Python Logo -->
                <g transform="translate(150, 110)" filter="url(#pythonShadow)">
                    <circle cx="0" cy="0" r="38" fill="rgba(255,255,255,0.15)"/>
                    <circle cx="0" cy="0" r="30" fill="#FFD43B"/>
                    <circle cx="-10" cy="-10" r="12" fill="#4B8BBE"/>
                    <circle cx="10" cy="10" r="8" fill="rgba(75, 139, 190, 0.6)"/>
                </g>
                
                <!-- Code Brackets -->
                <g transform="translate(950, 100)" stroke="white" stroke-width="3" fill="none" filter="url(#pythonShadow)">
                    <path d="M 5 10 L -15 30 L 5 50" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M 55 10 L 75 30 L 55 50" stroke-linecap="round" stroke-linejoin="round"/>
                    <line x1="20" y1="25" x2="40" y2="25" stroke-linecap="round"/>
                    <line x1="20" y1="35" x2="40" y2="35" stroke-linecap="round"/>
                </g>
                
                <!-- Text -->
                <text x="600" y="110" font-size="56" font-weight="700" fill="white" text-anchor="middle" font-family="'Segoe UI', Arial, sans-serif" letter-spacing="0.5">Ci√™ncia de Dados</text>
                <text x="600" y="170" font-size="22" fill="rgba(255,255,255,0.95)" text-anchor="middle" font-family="'Segoe UI', Arial, sans-serif">Processamento e an√°lise com Python</text>
                
                <!-- Accent line -->
                <line x1="350" y1="190" x2="850" y2="190" stroke="white" stroke-width="2" opacity="0.3"/>
            </svg>
        </div>
        {% elif article.category == 'Tecnologia' %}
        <div class="article-banner article-banner-tech">
            <svg class="banner-svg" viewBox="0 0 1200 300" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="techBg" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#7C3AED;stop-opacity:1" />
                        <stop offset="50%" style="stop-color:#6D28D9;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#5B21B6;stop-opacity:1" />
                    </linearGradient>
                    <filter id="techShadow">
                        <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
                    </filter>
                </defs>
                <rect width="1200" height="300" fill="url(#techBg)"/>
                
                <!-- Decorative circles -->
                <circle cx="120" cy="60" r="75" fill="rgba(255,255,255,0.09)"/>
                <circle cx="1080" cy="240" r="95" fill="rgba(255,255,255,0.07)"/>
                
                <!-- Microchip Icon -->
                <g transform="translate(150, 110)" filter="url(#techShadow)">
                    <rect x="0" y="0" width="76" height="76" fill="none" stroke="white" stroke-width="2.5" rx="6"/>
                    <circle cx="19" cy="19" r="6" fill="white"/>
                    <circle cx="57" cy="19" r="6" fill="white"/>
                    <circle cx="19" cy="57" r="6" fill="white"/>
                    <circle cx="57" cy="57" r="6" fill="white"/>
                    <line x1="38" y1="0" x2="38" y2="76" stroke="white" stroke-width="1.5" opacity="0.4"/>
                    <line x1="0" y1="38" x2="76" y2="38" stroke="white" stroke-width="1.5" opacity="0.4"/>
                    <line x1="19" y1="-8" x2="19" y2="84" stroke="white" stroke-width="1" opacity="0.2"/>
                    <line x1="57" y1="-8" x2="57" y2="84" stroke="white" stroke-width="1" opacity="0.2"/>
                </g>
                
                <!-- Rocket Icon -->
                <g transform="translate(950, 95)" filter="url(#techShadow)">
                    <path d="M 0 0 L -12 25 L 0 18 L 12 25 Z" fill="white"/>
                    <rect x="-10" y="18" width="20" height="45" rx="3" fill="rgba(255,255,255,0.8)"/>
                    <circle cx="-18" cy="40" r="7" fill="rgba(255,255,255,0.6)"/>
                    <circle cx="18" cy="40" r="7" fill="rgba(255,255,255,0.6)"/>
                    <path d="M -6 60 L -12 75 L 0 65 Z" fill="rgba(255,150,100,0.9)"/>
                    <path d="M 6 60 L 12 75 L 0 65 Z" fill="rgba(255,100,100,0.9)"/>
                </g>
                
                <!-- Text -->
                <text x="600" y="110" font-size="56" font-weight="700" fill="white" text-anchor="middle" font-family="'Segoe UI', Arial, sans-serif" letter-spacing="0.5">Inova√ß√£o Tecnol√≥gica</text>
                <text x="600" y="170" font-size="22" fill="rgba(255,255,255,0.95)" text-anchor="middle" font-family="'Segoe UI', Arial, sans-serif">Tend√™ncias e transforma√ß√£o digital</text>
                
                <!-- Accent line -->
                <line x1="350" y1="190" x2="850" y2="190" stroke="white" stroke-width="2" opacity="0.35"/>
            </svg>
        </div>
        {% else %}
        <div class="article-banner article-banner-default">
            <svg class="banner-svg" viewBox="0 0 1200 300" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="defaultBg" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#0066CC;stop-opacity:1" />
                        <stop offset="50%" style="stop-color:#0052A3;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#003D7A;stop-opacity:1" />
                    </linearGradient>
                    <filter id="defaultShadow">
                        <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.25"/>
                    </filter>
                </defs>
                <rect width="1200" height="300" fill="url(#defaultBg)"/>
                
                <!-- Decorative circles -->
                <circle cx="130" cy="70" r="75" fill="rgba(255,255,255,0.08)"/>
                <circle cx="1070" cy="230" r="95" fill="rgba(255,255,255,0.06)"/>
                
                <!-- Book Icon -->
                <g transform="translate(150, 110)" filter="url(#defaultShadow)">
                    <path d="M 0 0 C 0 0 0 70 10 75 L 60 75 C 70 70 70 0 60 0 Z" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round"/>
                    <path d="M 10 0 C 10 0 10 70 10 75" stroke="white" stroke-width="2" opacity="0.5"/>
                    <line x1="15" y1="15" x2="55" y2="15" stroke="white" stroke-width="1.5" opacity="0.6"/>
                    <line x1="15" y1="30" x2="55" y2="30" stroke="white" stroke-width="1.5" opacity="0.6"/>
                    <line x1="15" y1="45" x2="55" y2="45" stroke="white" stroke-width="1.5" opacity="0.6"/>
                    <line x1="15" y1="60" x2="55" y2="60" stroke="white" stroke-width="1.5" opacity="0.6"/>
                </g>
                
                <!-- Stars -->
                <g transform="translate(950, 100)" fill="white" filter="url(#defaultShadow)">
                    <polygon points="0,0 6,-16 12,0 28,-6 16,6 22,22 6,12 -10,22 -4,6 -16,-6" opacity="0.9"/>
                    <polygon points="0,55 4,-10 8,0 16,-4 10,4 14,14 4,7 -6,14 -2,4 -10,-4" opacity="0.7"/>
                </g>
                
                <!-- Text -->
                <text x="600" y="110" font-size="56" font-weight="700" fill="white" text-anchor="middle" font-family="'Segoe UI', Arial, sans-serif" letter-spacing="0.5">{{ article.title[:40] }}</text>
                <text x="600" y="170" font-size="22" fill="rgba(255,255,255,0.95)" text-anchor="middle" font-family="'Segoe UI', Arial, sans-serif">{{ article.category }}</text>
                
                <!-- Accent line -->
                <line x1="350" y1="190" x2="850" y2="190" stroke="white" stroke-width="2" opacity="0.3"/>
            </svg>
        </div>
        {% endif %}
        
        <header class="article-header">
            <div class="article-meta-top">
                <span class="category-badge">{{ article.category }}</span>
                <time datetime="{{ article.date.isoformat() }}">{{ article.locale_date }}</time>
            </div>
            <h1 class="article-title">{{ article.title }}</h1>
            <p class="article-author">Por {{ article.author if article.author else AUTHOR }}</p>
        </header>

        <div class="article-body">
            {{ article.content }}
        </div>

        <!-- Social Sharing -->
        <div class="social-share">
            <h4>Compartilhe este artigo:</h4>
            <div class="share-buttons">
                <a href="https://twitter.com/intent/tweet?text={{ article.title|urlencode }}&url={{ SITEURL }}/{{ article.url }}" 
                   target="_blank" 
                   rel="noopener noreferrer" 
                   class="share-btn twitter"
                   title="Compartilhar no Twitter">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                    </svg>
                    <span>Twitter</span>
                </a>

                <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ SITEURL }}/{{ article.url }}" 
                   target="_blank" 
                   rel="noopener noreferrer" 
                   class="share-btn linkedin"
                   title="Compartilhar no LinkedIn">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                    </svg>
                    <span>LinkedIn</span>
                </a>

                <a href="https://www.facebook.com/sharer/sharer.php?u={{ SITEURL }}/{{ article.url }}" 
                   target="_blank" 
                   rel="noopener noreferrer" 
                   class="share-btn facebook"
                   title="Compartilhar no Facebook">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                    </svg>
                    <span>Facebook</span>
                </a>

                <a href="https://wa.me/?text={{ article.title|urlencode }}%20{{ SITEURL }}/{{ article.url }}" 
                   target="_blank" 
                   rel="noopener noreferrer" 
                   class="share-btn whatsapp"
                   title="Compartilhar no WhatsApp">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                    </svg>
                    <span>WhatsApp</span>
                </a>
            </div>
        </div>

        {% if article.tags %}
        <footer class="article-tags">
            <h4>Tags:</h4>
            <ul>
                {% for tag in article.tags %}
                <li><a href="/tag/{{ tag|replace(' ', '-')|lower }}.html">#{{ tag }}</a></li>
                {% endfor %}
            </ul>
        </footer>
        {% endif %}

        <!-- Comments Section -->
        <section class="comments-section" id="comments-section">
            <h3>Coment√°rios</h3>
            <p class="comments-intro">üí¨ Entre com sua conta do <strong>Google</strong> para comentar.</p>

            <!-- Auth Section -->
            <div id="auth-section" class="auth-section">
                <button id="google-login-btn" class="btn btn-primary" onclick="signInWithGoogle()">Entrar com Google</button>
            </div>

            <!-- Comment Form -->
            <div id="comment-form" class="comment-form" style="display:none;">
                <div class="user-info">
                    <span id="user-name"></span> ¬∑ <span id="user-email"></span>
                    <button class="btn btn-link" onclick="signOut()">Sair</button>
                </div>
                <textarea id="comment-text" rows="4" placeholder="Escreva seu coment√°rio..." class="comment-textarea"></textarea>
                <button class="btn btn-primary" onclick="postComment()">Enviar coment√°rio</button>
            </div>

            <!-- Comments List -->
            <div id="comments-list" class="comments-list"></div>

            <!-- Database Provider: Firebase ativado (Supabase desativado) -->
            <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
            <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
            <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
            <script src="/theme/js/comments.js"></script>

            <!-- Supabase (Open Source Postgres) - desativado -->
            <!-- <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script> -->
            <!-- <script src="/theme/js/comments_supabase.js"></script> -->
            <!-- <script>document.addEventListener('DOMContentLoaded', initializeSupabase);</script> -->
        </section>
    </article>

    <!-- Navigation -->
    {% if article.prev_article or article.next_article %}
    <nav class="article-nav">
        {% if article.prev_article %}
        <a href="/{{ article.prev_article.url }}" class="nav-prev">
            <i class="fas fa-chevron-left"></i>
            <div>
                <span class="nav-label">Post Anterior</span>
                <span class="nav-title">{{ article.prev_article.title }}</span>
            </div>
        </a>
        {% endif %}
        
        {% if article.next_article %}
        <a href="/{{ article.next_article.url }}" class="nav-next">
            <div>
                <span class="nav-label">Pr√≥ximo Post</span>
                <span class="nav-title">{{ article.next_article.title }}</span>
            </div>
            <i class="fas fa-chevron-right"></i>
        </a>
        {% endif %}
    </nav>
    {% endif %}

    <!-- Back Button -->
    <div class="back-button-section">
        <a href="/blog.html" class="back-button">
            <i class="fas fa-arrow-left"></i> Voltar ao Blog
        </a>
    </div>
</div>
{% endblock %}
